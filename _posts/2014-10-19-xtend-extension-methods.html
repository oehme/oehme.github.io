---
layout: post
title: Xtend - Extension Methods
date: '2014-10-19T11:13:00.000+02:00'
author: Stefan Oehme
tags:
- xtend series
modified_time: '2014-10-20T09:28:29.949+02:00'
thumbnail: http://3.bp.blogspot.com/-582oNJt_PLw/VD5adKt_yKI/AAAAAAAAO8c/vw82Yn_5i-U/s72-c/Primes1.PNG
blogger_id: tag:blogger.com,1999:blog-7973028861743150658.post-1107568760325005632
blogger_orig_url: http://mnmlst-dvlpr.blogspot.com/2014/10/xtend-extension-methods.html
---

This is the feature that gave Xtend its name and one of its most powerful tools. At the same time it is one of the least understood features among beginners, so I'll give you a head start.<br /><br />Extension methods can be called on instances of their first parameter type as if they were defined in that type. That's quite a mouthful, so let's just look at an example:<br /><br /><div class="separator" style="clear: both; text-align: left;"><a href="http://3.bp.blogspot.com/-582oNJt_PLw/VD5adKt_yKI/AAAAAAAAO8c/vw82Yn_5i-U/s1600/Primes1.PNG" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://3.bp.blogspot.com/-582oNJt_PLw/VD5adKt_yKI/AAAAAAAAO8c/vw82Yn_5i-U/s1600/Primes1.PNG" /></a></div><br /><div class="separator" style="clear: both; text-align: left;"></div>We defined an <i>isPrime </i>method that takes an <i>int </i>and then we could call <i>2.isPrime</i>. You can extend any existing type this way. But which methods exactly are available as extension methods? As you have seen in the example above, instance methods of the current class are automatically available as extension methods. But many times you will want to write an extension once and then use it wherever you need it.<br /><br />The simplest approach is to have static methods and import those using a static extension import. Doing this, these methods are available as extension methods in the whole file.<br /><br /><div class="separator" style="clear: both; text-align: left;"></div><div class="separator" style="clear: both; text-align: left;"></div><div class="separator" style="clear: both; text-align: left;"><a href="http://2.bp.blogspot.com/-DdWl35lv2Cw/VD5HG3CYSNI/AAAAAAAAO7g/qmeTpv5C06U/s1600/StaticExtension.PNG" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://2.bp.blogspot.com/-DdWl35lv2Cw/VD5HG3CYSNI/AAAAAAAAO7g/qmeTpv5C06U/s1600/StaticExtension.PNG" /></a></div><br />But often times you don't want static methods. Maybe because the helper method lives in a stateful object. Or maybe because you want to use a service that you get through dependency injection. For these cases you can also mark fields, parameters and even local variables as <span style="color: purple;"><b>extension</b></span>s. Their methods are then available as extension methods wherever the field/parameter/variable itself is visible. Below is an example of an extension field, maybe initialized in the constructor.<br /><br /><div class="separator" style="clear: both; text-align: left;"><a href="http://1.bp.blogspot.com/-KuBkJhdBA-o/VD5IVEX0INI/AAAAAAAAO7s/k8DcmVftenw/s1600/extensionfield.PNG" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://1.bp.blogspot.com/-KuBkJhdBA-o/VD5IVEX0INI/AAAAAAAAO7s/k8DcmVftenw/s1600/extensionfield.PNG" /></a></div><br />This makes typical OO patterns look much cleaner in Xtend. We all know that we should follow principles like "Single Responsibility". But in Java, calling these helpers is annoyingly verbose:<br /><br /><div class="separator" style="clear: both; text-align: left;"><a href="http://2.bp.blogspot.com/-IMbuZrZ884I/VD5JEvAz-dI/AAAAAAAAO70/bCFNGwpdPps/s1600/extensionfieldjava.PNG" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://2.bp.blogspot.com/-IMbuZrZ884I/VD5JEvAz-dI/AAAAAAAAO70/bCFNGwpdPps/s1600/extensionfieldjava.PNG" /></a></div><br />Another common pattern are factory methods and the Master-Yoda language that you use in Java.<br /><br /><div class="separator" style="clear: both; text-align: left;"><a href="http://1.bp.blogspot.com/-Z3tAeI7bpB8/VD5Jsel9CWI/AAAAAAAAO78/d6ikq83dS9o/s1600/dollarsjava.PNG" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://1.bp.blogspot.com/-Z3tAeI7bpB8/VD5Jsel9CWI/AAAAAAAAO78/d6ikq83dS9o/s1600/dollarsjava.PNG" /></a></div><br />In Xtend, using a static extension import, we get much closer to English.<br /><br /><div class="separator" style="clear: both; text-align: left;"><a href="http://3.bp.blogspot.com/-39RK9gxb2qs/VD5KTUst_cI/AAAAAAAAO8E/PsQrKSI8bpk/s1600/xtenddollars.PNG" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://3.bp.blogspot.com/-39RK9gxb2qs/VD5KTUst_cI/AAAAAAAAO8E/PsQrKSI8bpk/s1600/xtenddollars.PNG" /></a></div><br />And of course you sometimes need to use APIs that are just inconvenient. The only workaround in Java is creating wrapper classes that hide the bad API. But that of course adds runtime overhead for wrapping/unwrapping. With Xtend you can write some convenient extension methods and avoid this overhead completely.<br /><br /><div class="separator" style="clear: both; text-align: left;"><a href="http://3.bp.blogspot.com/-uLozvdb_88U/VEKiTSOAj-I/AAAAAAAAO94/uIy75_pgnDo/s1600/HideBadAPI.PNG" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://3.bp.blogspot.com/-uLozvdb_88U/VEKiTSOAj-I/AAAAAAAAO94/uIy75_pgnDo/s1600/HideBadAPI.PNG" height="128" width="320" /></a></div><br />Notice how there is no more syntactic difference between a normal method and a helper method. This makes for much more readable call chains.<br /><br /><div class="separator" style="clear: both;"><a href="http://3.bp.blogspot.com/-r5NEmcs7VZQ/VES4-KJh7GI/AAAAAAAAO-M/RY_7RRj3tR8/s1600/Order.PNG" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://3.bp.blogspot.com/-r5NEmcs7VZQ/VES4-KJh7GI/AAAAAAAAO-M/RY_7RRj3tR8/s1600/Order.PNG" /></a></div><br />To top it off, Xtend ships a small library with useful extension methods for classes from the JDK. Most importantly these include methods like <a href="http://download.eclipse.org/modeling/tmf/xtext/javadoc/2.7/org/eclipse/xtext/xbase/lib/IterableExtensions.html">filter, map and reduce</a> to work with collections in a functional style.